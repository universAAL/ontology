<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>org.universAAL.ontology</groupId>
		<artifactId>ont.pom</artifactId>
		<version>1.0.1</version>
		<relativePath>../pom/pom.xml</relativePath>
	</parent>
	<artifactId>ont.phWorld</artifactId>
	<version>0.2.4-SNAPSHOT</version>
	<packaging>bundle</packaging>

	<!-- ______________________________________________________ -->

	<name>The Physical World Ontology</name>
	<description>The upper ontology defining the most general concepts from the physical world as opposed to the virtual realm.</description>

	<!-- ______________________________________________________ -->

	<dependencies>
		<!--
			The dependency to itests has always come before the dependency to
			org.osgi.core (groupId:org.apache.felix). The easiest approach is to
			just put the dependency to itests as the first one.
		-->	
		<dependency>
			<groupId>org.universAAL.support</groupId>
			<artifactId>itests</artifactId>
			<version>0.1.1-SNAPSHOT</version>
			<scope>test</scope>
		</dependency>
			
		<dependency>
			<groupId>org.apache.felix</groupId>
			<artifactId>org.osgi.core</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>java3d</groupId>
			<artifactId>j3d-core</artifactId>
			<version>1.3.1</version>
		</dependency>
		<dependency>
			<groupId>jp.go.ipa</groupId>
			<artifactId>jgcl</artifactId>
			<version>1.0</version>
		</dependency>
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.universAAL.middleware</groupId>
			<artifactId>mw.data.representation</artifactId>
			<version>0.3.2-SNAPSHOT</version>
		</dependency>
		<dependency>
			<groupId>org.universAAL.middleware</groupId>
			<artifactId>mw.bus.service</artifactId>
			<version>0.3.2-SNAPSHOT</version>
		</dependency>
		<dependency>
			<groupId>org.universAAL.middleware</groupId>
			<artifactId>mw.container.xfaces</artifactId>
			<version>0.1.0-SNAPSHOT</version>
		</dependency>
		<dependency>
			<groupId>org.universAAL.middleware</groupId>
			<artifactId>mw.container.osgi</artifactId>
			<version>0.1.0-SNAPSHOT</version>
		</dependency>
	</dependencies>

	<!-- ______________________________________________________ -->

	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.felix</groupId>
				<artifactId>maven-bundle-plugin</artifactId>
				<extensions>true</extensions>
				<executions>
					<execution>
						<id>bundle-manifest</id>
						<phase>process-classes</phase>
						<goals>
							<goal>manifest</goal>
						</goals>
					</execution>
				</executions>				
				<configuration>
					<instructions>
						<Bundle-Name>${project.name}</Bundle-Name>
						<Bundle-Activator>org.universAAL.ontology.Activator</Bundle-Activator>
						<Bundle-Description>${project.description}</Bundle-Description>
						<Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
						<Export-Package>org.universAAL.ontology.space,org.universAAL.ontology.phThing,
							org.universAAL.ontology.location,org.universAAL.ontology.location.indoor,
							org.universAAL.ontology.location.outdoor,org.universAAL.ontology.location.position,
							org.universAAL.ontology.location.address,
							org.universAAL.ontology.shape</Export-Package>
						<Private-Package>org.universAAL.ontology</Private-Package>
					</instructions>
				</configuration>
			</plugin>
			<plugin>
				<!-- Plugin for *installing* and *deploying* composite of the current version -->
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>build-helper-maven-plugin</artifactId>
			</plugin>
			<plugin>
				<!-- Plugin for *installing* composite of 0.2.3-SNAPSHOT -->
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-install-plugin</artifactId>
				<executions>
					<execution>
						<id>artifact-composite-0.2.3-install</id>
						<phase>install</phase>
						<goals>
							<goal>install-file</goal>
						</goals>
						<configuration>
							<file>${basedir}/artifact-0.2.3.composite</file>
							<groupId>${groupId}</groupId>
							<artifactId>${artifactId}</artifactId>
							<version>0.2.3-SNAPSHOT</version>
							<packaging>composite</packaging>
						</configuration>
					</execution>				
				</executions>
			</plugin>			
		</plugins>
	</build>
	
	<profiles>
		<profile>
			<id>composite-0.2.3-deploy</id>
			<build>
				<plugins>
					<plugin>
						<!-- Deploying of the current version is skipped in this profile -->
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>build-helper-maven-plugin</artifactId>
						<version>1.7</version>
						<configuration>
							<skipAttach>true</skipAttach>
						</configuration>
					</plugin>				
					<plugin>
						<!--
							Plugin for *deploying* composite of 0.2.3-SNAPSHOT
							It is turned off by default. If there a need for *deploying* it
							the following command has to be invoked:
							"mvn deploy -Pcomposite-0.2.3-deploy"
						 -->
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-deploy-plugin</artifactId>
						<version>2.7</version>
						<configuration>
							<!-- Deployment of the current version is skipped -->
							<skip>true</skip>
						</configuration>
						<executions>
							<execution>
								<id>composite-0.2.3-deploy</id>
								<phase>deploy</phase>
								<goals>
									<goal>deploy-file</goal>
								</goals>
								<!-- Config is complex because composite needs to be deployed together
									 with JAR and POM. Otherwise Pax Runner and Integration Tests will
									 not be able to download artifact from nexus snapshot repository!!
								 -->
								<configuration>
									<repositoryId>uaal-snapshots</repositoryId>
									<url>http://depot.universaal.org/maven-repo/snapshots/</url>
									<file>${basedir}/composite-0.2.3/ont.phWorld-0.2.3-SNAPSHOT.jar</file>
									<pomFile>${basedir}/composite-0.2.3/ont.phWorld-0.2.3-SNAPSHOT.pom</pomFile>
									<groupId>${groupId}</groupId>
									<artifactId>${artifactId}</artifactId>
									<version>0.2.3-SNAPSHOT</version>
									<packaging>jar</packaging>
									<!-- The second file and type are just dummies because when having only one classifer
										 empty classifier was not accepted.
									-->
									<files>${basedir}/artifact-0.2.3.composite,${basedir}/artifact-0.2.3.composite</files>
									<types>composite,composite_copy</types>
									<classifiers>,</classifiers>											
								</configuration>											
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>		

	<!-- ______________________________________________________ -->

	<scm>
		<connection>scm:svn:http://forge.universaal.org/svn/ontologies/trunk/physical.world</connection>
		<developerConnection>scm:svn:http://forge.universaal.org/svn/ontologies/trunk/physical.world</developerConnection>
		<url>http://forge.universaal.org/gf/project/ontologies/scmsvn/?path=%2Ftrunk%2F</url>
	</scm>
</project>
